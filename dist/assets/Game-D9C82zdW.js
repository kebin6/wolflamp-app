import{_ as Re}from"./avatar-Hh0ap730.js";import{B as de}from"./Button-BWSBoGnF.js";import{E as $,G as Me,H as D,I as ae,d as H,J as z,K as Y,L as K,r as x,M as Ne,c as B,N as Ie,O as Be,Q as Qe,R as xe,k as b,S as Te,T as me,U as J,V as ke,W as De,X as He,Y as Ge,B as Z,Z as X,$ as Ye,D as fe,a0 as ve,a1 as Le,a2 as Je,a3 as je,i as E,f as g,t as M,h as C,w as W,P as _e,b as O,m as Se,z as Ae,A as re,_ as ue,e as Ke,n as le,a as We,a4 as $e,o as qe,a5 as ze,p as ee,F as pe,a6 as ge,a7 as Ze,a8 as te,a9 as ne,s as oe,aa as Xe,y as et,l as he}from"./index-Br0lMVMS.js";import{g as tt}from"./index-IoArt0Wi.js";import{s as L}from"./toast-D8h3nvkb.js";import{_ as nt}from"./close-Uy8MzfNY.js";import"./index-D0Yk_raA.js";import"./_commonjsHelpers-Cpj98o6Y.js";const[ot,P,be]=$("picker"),Oe=e=>e.find(s=>!s.disabled)||e[0];function st(e,s){const o=e[0];if(o){if(Array.isArray(o))return"multiple";if(s.children in o)return"cascade"}return"default"}function j(e,s){s=ae(s,0,e.length);for(let o=s;o<e.length;o++)if(!e[o].disabled)return o;for(let o=s-1;o>=0;o--)if(!e[o].disabled)return o;return 0}const ye=(e,s,o)=>s!==void 0&&!!e.find(d=>d[o.value]===s);function ce(e,s,o){const d=e.findIndex(f=>f[o.value]===s),l=j(e,d);return e[l]}function at(e,s,o){const d=[];let l={[s.children]:e},f=0;for(;l&&l[s.children];){const m=l[s.children],i=o.value[f];if(l=Me(i)?ce(m,i,s):void 0,!l&&m.length){const v=Oe(m)[s.value];l=ce(m,v,s)}f++,d.push(m)}return d}function lt(e){const{transform:s}=window.getComputedStyle(e),o=s.slice(7,s.length-1).split(", ")[5];return Number(o)}function ct(e){return D({text:"text",value:"value",children:"children"},e)}const Ce=200,we=300,At=15,[Ve,se]=$("picker-column"),Ee=Symbol(Ve);var rt=H({name:Ve,props:{value:z,fields:Y(Object),options:K(),readonly:Boolean,allowHtml:Boolean,optionHeight:Y(Number),swipeDuration:Y(z),visibleOptionNum:Y(z)},emits:["change","clickOption","scrollInto"],setup(e,{emit:s,slots:o}){let d,l,f,m,i;const v=x(),p=x(),A=x(0),h=x(0),y=Ne(),w=()=>e.options.length,N=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,V=a=>{let t=j(e.options,a);const n=-t*e.optionHeight,c=()=>{t>w()-1&&(t=j(e.options,a));const _=e.options[t][e.fields.value];_!==e.value&&s("change",_)};d&&n!==A.value?i=c:c(),A.value=n},T=()=>e.readonly||!e.options.length,Q=a=>{d||T()||(i=null,h.value=Ce,V(a),s("clickOption",e.options[a]))},S=a=>ae(Math.round(-a/e.optionHeight),0,w()-1),k=B(()=>S(A.value)),I=(a,t)=>{const n=Math.abs(a/t);a=A.value+n/.003*(a<0?-1:1);const c=S(a);h.value=+e.swipeDuration,V(c)},F=()=>{d=!1,h.value=0,i&&(i(),i=null)},G=a=>{if(!T()){if(y.start(a),d){const t=lt(p.value);A.value=Math.min(0,t-N())}h.value=0,l=A.value,f=Date.now(),m=l,i=null}},U=a=>{if(T())return;y.move(a),y.isVertical()&&(d=!0,Te(a,!0));const t=ae(l+y.deltaY.value,-(w()*e.optionHeight),e.optionHeight),n=S(t);n!==k.value&&s("scrollInto",e.options[n]),A.value=t;const c=Date.now();c-f>we&&(f=c,m=t)},r=()=>{if(T())return;const a=A.value-m,t=Date.now()-f;if(t<we&&Math.abs(a)>At){I(a,t);return}const c=S(A.value);h.value=Ce,V(c),setTimeout(()=>{d=!1},0)},u=()=>{const a={height:`${e.optionHeight}px`};return e.options.map((t,n)=>{const c=t[e.fields.text],{disabled:_}=t,R=t[e.fields.value],Ue={role:"button",style:a,tabindex:_?-1:0,class:[se("item",{disabled:_,selected:R===e.value}),t.className],onClick:()=>Q(n)},Fe={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:c};return b("li",Ue,[o.option?o.option(t,n):b("div",Fe,null)])})};return Ie(Ee),Be({stopMomentum:F}),Qe(()=>{const a=d?Math.floor(-A.value/e.optionHeight):e.options.findIndex(c=>c[e.fields.value]===e.value),t=j(e.options,a),n=-t*e.optionHeight;d&&t<a&&F(),A.value=n}),xe("touchmove",U,{target:v}),()=>b("div",{ref:v,class:se(),onTouchstartPassive:G,onTouchend:r,onTouchcancel:r},[b("ul",{ref:p,style:{transform:`translate3d(0, ${A.value+N()}px, 0)`,transitionDuration:`${h.value}ms`,transitionProperty:h.value?"all":"none"},class:se("wrapper"),onTransitionend:F},[u()])])}});const[ut]=$("picker-toolbar"),q={title:String,cancelButtonText:String,confirmButtonText:String},it=["cancel","confirm","title","toolbar"],dt=Object.keys(q);var mt=H({name:ut,props:q,emits:["confirm","cancel"],setup(e,{emit:s,slots:o}){const d=()=>{if(o.title)return o.title();if(e.title)return b("div",{class:[P("title"),"van-ellipsis"]},[e.title])},l=()=>s("cancel"),f=()=>s("confirm"),m=()=>{var v;const p=(v=e.cancelButtonText)!=null?v:be("cancel");if(!(!o.cancel&&!p))return b("button",{type:"button",class:[P("cancel"),me],onClick:l},[o.cancel?o.cancel():p])},i=()=>{var v;const p=(v=e.confirmButtonText)!=null?v:be("confirm");if(!(!o.confirm&&!p))return b("button",{type:"button",class:[P("confirm"),me],onClick:f},[o.confirm?o.confirm():p])};return()=>b("div",{class:P("toolbar")},[o.toolbar?o.toolbar():[m(),d(),i()]])}});const[ft,rn]=$("picker-group"),vt=Symbol(ft);D({tabs:K(),activeTab:J(0),nextStepText:String,showToolbar:ke},q);const pt=D({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:J(44),showToolbar:ke,swipeDuration:J(1e3),visibleOptionNum:J(6)},q),gt=D({},pt,{columns:K(),modelValue:K(),toolbarPosition:De("top"),columnsFieldNames:Object});var ht=H({name:ot,props:gt,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e,{emit:s,slots:o}){const d=x(),l=x(e.modelValue.slice(0)),{parent:f}=Ie(vt),{children:m,linkChildren:i}=He(Ee);i();const v=B(()=>ct(e.columnsFieldNames)),p=B(()=>Ge(e.optionHeight)),A=B(()=>st(e.columns,v.value)),h=B(()=>{const{columns:t}=e;switch(A.value){case"multiple":return t;case"cascade":return at(t,v.value,l);default:return[t]}}),y=B(()=>h.value.some(t=>t.length)),w=B(()=>h.value.map((t,n)=>ce(t,l.value[n],v.value))),N=B(()=>h.value.map((t,n)=>t.findIndex(c=>c[v.value.value]===l.value[n]))),V=(t,n)=>{if(l.value[t]!==n){const c=l.value.slice(0);c[t]=n,l.value=c}},T=()=>({selectedValues:l.value.slice(0),selectedOptions:w.value,selectedIndexes:N.value}),Q=(t,n)=>{V(n,t),A.value==="cascade"&&l.value.forEach((c,_)=>{const R=h.value[_];ye(R,c,v.value)||V(_,R.length?R[0][v.value.value]:void 0)}),fe(()=>{s("change",D({columnIndex:n},T()))})},S=(t,n)=>{const c={columnIndex:n,currentOption:t};s("clickOption",D(T(),c)),s("scrollInto",c)},k=()=>{m.forEach(n=>n.stopMomentum());const t=T();return fe(()=>{s("confirm",t)}),t},I=()=>s("cancel",T()),F=()=>h.value.map((t,n)=>b(rt,{value:l.value[n],fields:v.value,options:t,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:p.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:c=>Q(c,n),onClickOption:c=>S(c,n),onScrollInto:c=>{s("scrollInto",{currentOption:c,columnIndex:n})}},{option:o.option})),G=t=>{if(y.value){const n={height:`${p.value}px`},c={backgroundSize:`100% ${(t-p.value)/2}px`};return[b("div",{class:P("mask"),style:c},null),b("div",{class:[Je,P("frame")],style:n},null)]}},U=()=>{const t=p.value*+e.visibleOptionNum,n={height:`${t}px`};return b("div",{ref:d,class:P("columns"),style:n},[F(),G(t)])},r=()=>{if(e.showToolbar&&!f)return b(mt,Le(ve(e,dt),{onConfirm:k,onCancel:I}),ve(o,it))};Z(h,t=>{t.forEach((n,c)=>{n.length&&!ye(n,l.value[c],v.value)&&V(c,Oe(n)[v.value.value])})},{immediate:!0});let u;return Z(()=>e.modelValue,t=>{!X(t,l.value)&&!X(t,u)&&(l.value=t.slice(0),u=t.slice(0))},{deep:!0}),Z(l,t=>{X(t,e.modelValue)||(u=t.slice(0),s("update:modelValue",u))},{immediate:!0}),xe("touchmove",Te,{target:d}),Be({confirm:k,getSelectedOptions:()=>w.value}),()=>{var t,n;return b("div",{class:P()},[e.toolbarPosition==="top"?r():null,e.loading?b(Ye,{class:P("loading")},null):null,(t=o["columns-top"])==null?void 0:t.call(o),U(),(n=o["columns-bottom"])==null?void 0:n.call(o),e.toolbarPosition==="bottom"?r():null])}}});const bt=je(ht),yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAAAAXNSR0IArs4c6QAAAR1QTFRFAAAAAAAAAAAAFy4XFSoVAAAACyALCh8KFB0UAAAAEyYTFiQWHCsVHDIVHDAcAAAAAAAABQkFBQkFBw4HAAAAAAAABwsGCQ8HCQ8HAAAABQkEBQkFBQsFAAAABAcEBQcEBQgEAAAAAgICBgoGCAwFBAgEBwwFBAgEBwcHAAAAAAAABgoFAwUCAwYDCQkJKUMkLUknP1A7Q2w5Q2w6R0pHT1FOT1JPUoVHU4ZIVllVaqxcbbBebrFfcHRvdnp1d8BnfIJ8fclsfoN9gYaAhsx2is57i7yAjL2Bl9OJl9OKm6KZnKOanaOcsd2ntLuzwOS5ydHIytLJzunIz9fN0NjO4PDc4erf4fDe4uvg5fLj5u/k5/Pl6fTn6vTo7PXq4YrTMQAAAC50Uk5TAAgJCwwVGBkaGxsjJCQlaGlub3GAgYmLjLO8vb3N1dbX2uPm6Onp6vP09fj7/Iy1FX0AAAEVSURBVBgZZcEJWwFRGAbQzzLVtFGWoqihZTQYy6VG2WkdTEJcvP//ZzRxH+pxDi1J3pCSSCghj0RrjoBqmNZoZJmG6neQIEeKAwiDQkSmBTnWxB+NmEw2Z6SJfxoRJxEFivjFaxxCwU8kqQPYOGMcwpcqkdeAjTPGsWJ4KGQC4CxdrggAzBApFoBuZQ2ApdDdGBtGCUqOsWGUpJtP2CprXcC6ovMP2CpCOc048H5Gx9kJVjhjHJhkj2hbe5lC4IxxYPqsbRGd6m/fWOI1Dny/6idE5L7Mt3pzCPNeK3fhJtvhdb7e7vSHs9mw32nXc7cHtLAf1Z/qwqMe3SPBFdQyD6VqtXSf0YIuWtv1heOpVDzs26GFH6JMccJRizeRAAAAAElFTkSuQmCC",Ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAaCAMAAACaYWzBAAAAAXNSR0IArs4c6QAAAnxQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgoKAAAAAAAAAAAABQUFAAAAAAAAAAAAAAAADAwMAAAADAwMAAAAAAAAAAAACwsLAAAAAAAAAAAAAAAAJSUlAAAAAAAAAAAAAAAAAAAAExMTJycnAAAAAAAAAAAABQUFEhISHh4eAAAANTU1AAAAPDw8SkpKS0tLAgICAAAAICAgJSUlDw8PXV1dERERBwcHbW1tMTExDw8PQ0NDdnZ2ERERcXFxFRUVdnZ2f39/IiIiMTExWFhYFBQUMTExFhYWIiIijIyMXFxcICAgPT09l5eXIiIiWVlZoqKiYmJiZGRkUFBQUVFRo6OjpqamOjo6////ERERExISGBgYGhoaHBwcHh4eHx8fIyMjJSUlKCgoKioqKysrLy8vMDAwMTExMjIyMzMzNjY2ODg4OTk5Ozs7PDg7PDw8PT09Pj4+Pz8/QEBAQUFBQ0NDRD5CR0dHSEhISTtESUlJS0tLT09PUFBQUVFRVFRUVVVVVlZWWlpaW1tbXFxcXVxdXV1dXl1dXl5eX19fYF5fYWFhYmJiY2NjZGRkamVna2trbW1tcHBwcnJyeHh4eXl5f39/hISEhYWFh4eHiYmJioqKi3qGj4+PkJCQmJiYo6Ojpqamqqqqrq6usbGxubm5wMDAwsLCw8PDxcXFzMzM0dHR09PT1NTU1tbW2NjY2tra3KvM3Nzc5OTk6urq7Ozs8fHx8/Pz9PT09vb2+Pj4+vr6+/v7/f39/v7+////W1ch6wAAAG10Uk5TAAEDBAUGCAkMDg8QEhUYGRocICEiJSYqKywwMTM0NTY3OTo9Pj9AQUJERUZISktMTE1OT1BRUlRVV2FhYmVob3ByfH5/gIiKjI6Tlpqbnaenqamsra62u72+xs7S0tPW1uPr7u7y8/j4+Pj8/qOb8bMAAAGsSURBVBgZZcGHX4xxAAfgbwgRGZVs11l3UpLslb0zi1LZe+8R2pmRo98r71GpKKMozUtnJeTl7vsPee99rzufPA90vvPGhu7ZaViwfo0ZPv5zoJuQE7ebVMh2kh8n9jl8zx+a5VZhYacO+3NLCnTj7+dJ2T/psQO6HvvYVl5Gr7fQjGhkF0eS4bKZ/5sOYEZlwS9qHJ9aK17Yv9lsTs4EcIhuytGHVJ0iS9gUACTR7Zo4XvuHvELW2xgDrKXOeVFkU3WdZAtXAgepc+SKLCfJC1+UzBYuApY4qDv5+NGZts/nJFEoN7cOBDbyxOWXVNU9eyIJl+qMHwwFtryTxV26nJaFEHeO3S56Ty4GuqeJQgs1388/sH69mfqB5KWhMMvihkK3Dntag0LW5EvxWCZb3rCLV4nFCRhzdsOBUv7Lya0Y1AuqIe3kb3rNRafBU+bTo3SvHzy6pebT5TV5Sx4Hr0lPC/L2x66uWjH7qiS2w63vaPOqIusuU3iEKWLqwvSSbZNNw3yhCo6aFr1pnTlSN2tpZFR0WD9oeg8IChlpMBiNRsOo4SGB/XsC+AsULz/7Bzr1OwAAAABJRU5ErkJggg==",wt="/assets/wolf-IBMqgako.gif",It="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAuCAMAAACVmVC1AAAAAXNSR0IArs4c6QAAASlQTFRFAAAAAAAAGjMAAAAAAAAACRMFCRIFAAAAAAAAAAAAAAAAAgUCAgUCAgcCAgYCAwkCAwkCBQwDBQwDAAAAAAAABQoDBAkDAAAAAAAAAQUBAgUBAgcCAAAAAAAAAQQBAQQBAgQBAAAAAAAAAAEAAAAAAgQBAgUBAwgCBQ0DBgYABwcABxAFCBYFChoGDSQIEzQMGRgCGkUQHkIWIloVKGsZKm8aMYIfNjMGNzQGN3cpN3gpOHkpOHoqOHsqOZcjQawpQpAxRJcxRJcyRpc0SL4tSMAtScEuSkYISsYvS0cIS601Ts4xUs43U9w0VdY3Vdc3VuU2V+g3WOU4WOY4WOk3We04W+45W/I5XPM6cmwNc20Nm5IRnZQR0cUY0sYY59oa6Nsa8uQb8+Uco7Qx/gAAACR0Uk5TAAYKLzA3OJSVlpiam5ydoqOlp72+ysvW2N7e4fT1+/z8/f7+cirHcAAAAT9JREFUOMvtlddOgkEQhQ9NAXtFpegPh6L0qlgABRQpShH47bLv/xBeaKIJ7KL3fLf7JTtzZpIBAJitDjfHcTmsJnxhsGuUodkMAGDYZDBz/aCP06lmgtwwALAzWtNl1KK0AWYtKFd0vRbUTLAyo6vIcB47rCqdKh1ws6N0OnSB1NWQM+fvTvL35iQnO43AjxJoSP7K8mQkhBCjY2Zl9bQjfBFCiGdG2tKaC0x8CPGeYEHe1zDOJyEeGR8qeq/w6O31kBVlPmne3jCtzrAVIkOtKTnnyNy0WfRjsf7UeRWLs139t9NTKj0S+7y6Vyh3lzyAk6flerM7mPA+6Dbr5TydWGaqrCLFJcx5AxcK5dzvtQCrDMulszBXABi3GUjlSxOEUj7l55YRAIzrPukt8K0Zvy+GZXHXM0Hw7C1YAOATGaPFqUPYVnMAAAAASUVORK5CYII=",Pe=e=>(Ae("data-v-bd30571d"),e=e(),re(),e),Bt={class:"picker-cmp"},xt=Pe(()=>g("section",{class:"label"},"STAKE",-1)),Tt={class:"value"},kt=Pe(()=>g("img",{src:It},null,-1)),_t=H({__name:"Picker",props:{modelValue:{default:0},disabled:{type:Boolean,default:!1}},emits:["confirm","update:modelValue"],setup(e,{emit:s}){const o=e,d=s,l=[{text:"1",value:1},{text:"5",value:5},{text:"10",value:10},{text:"20",value:20},{text:"50",value:50},{text:"100",value:100}],f=x(!1);let m=B({get(){return[o.modelValue]},set(v){d("update:modelValue",v[0]||0)}});const i=()=>{o.disabled||(f.value=!0)};return(v,p)=>{const A=bt,h=_e;return O(),E("section",Bt,[g("section",{class:"picker-box",onClick:i},[xt,g("section",Tt,M(C(m)[0]||0),1),kt]),b(h,{show:f.value,"onUpdate:show":p[1]||(p[1]=y=>f.value=y),round:"",position:"bottom"},{default:W(()=>[b(A,{columns:l,modelValue:C(m),"onUpdate:modelValue":p[0]||(p[0]=y=>Se(m)?m.value=y:m=y),"show-toolbar":!1},null,8,["modelValue"])]),_:1},8,["show"])])}}}),St=ue(_t,[["__scopeId","data-v-bd30571d"]]);function Ot(){const e=(f,m)=>Math.floor(Math.random()*(m-f+1)+f),s=document.querySelector(":root"),o=10,d={1:{x:[20,80],y:[20,85]},2:{x:[20,80],y:[20,85]},3:{x:[20,80],y:[20,85]},4:{x:[20,80],y:[20,85]},5:{x:[20,80],y:[20,85]},6:{x:[20,80],y:[20,85]},7:{x:[20,80],y:[20,85]},8:{x:[20,80],y:[20,85]}},l={};return Object.entries(d).forEach(([f,m])=>{let i=1;for(;i<=o;){const[v,p]=m.x,[A,h]=m.y,y=e(v,p),w=e(A,h);s.style.setProperty(`--juan${f}-lambs${i}-x`,`${y}%`),s.style.setProperty(`--juan${f}-lambs${i}-y`,`${w}%`),l[`juan${f}-lambs${i}-x`]=y,l[`juan${f}-lambs${i}-y`]=w,++i}}),{positionVar:l}}const Vt=e=>(Ae("data-v-ec662956"),e=e(),re(),e),Et={class:"num"},Pt=Vt(()=>g("section",{class:"unit"},"LAMBS",-1)),Ut={class:"close-icon"},Ft=H({__name:"ResultDialog",props:{modelValue:{type:Boolean,default:!1},type:{default:"success"},num:{default:0}},emits:["update:modelValue","onClose"],setup(e,{emit:s}){const o=e,d=s,l=B({get(){return o.modelValue},set(m){d("update:modelValue",m)}}),f=()=>{l.value=!1,d("onClose")};return(m,i)=>{const v=_e;return O(),Ke(v,{show:l.value,"onUpdate:show":i[1]||(i[1]=p=>l.value=p),class:"result-dialog","close-on-click-overlay":!1,onClose:f},{default:W(()=>[g("section",{class:le(["box",m.type])},[g("section",Et,M(o.num),1),Pt],2),g("section",Ut,[g("img",{src:nt,onClick:i[0]||(i[0]=p=>l.value=!1)})])]),_:1},8,["show"])}}}),Rt=ue(Ft,[["__scopeId","data-v-ec662956"]]),ie=e=>(Ae("data-v-ec2bc043"),e=e(),re(),e),Mt={class:"page-game-header"},Nt={class:"left"},Qt=ie(()=>g("img",{class:"avatar",src:Re},null,-1)),Dt={class:"number"},Ht={class:"right"},Gt={class:"time"},Yt={class:"juan-box"},Lt=["onClick"],Jt={class:"juan-item__wrapper"},jt={class:"number"},Kt={class:"lambs-box"},Wt=ie(()=>g("img",{src:Ct},null,-1)),$t={key:0,class:"remark"},qt=ie(()=>g("section",null,"You",-1)),zt={class:"page-game-op"},Zt={class:"remark"},Xt=["src"],en=H({__name:"Game",setup(e){const s=We();let o=$e({time:0,onFinish:async()=>{clearInterval(U),console.log("倒计时结束"),L(),await y(A.value.id),ee()}}),d=(o==null?void 0:o.current)||{},l=B(()=>{if(!o)return"00:00";let r=o.current,u=r.value.minutes,a=r.value.seconds;return`${u<10?`0${u}`:u}:${a<10?`0${a}`:a}`});const f=()=>{if(!A.value)return;let r=A.value.openAt*1e3-Date.now();o.reset(r),o.start()};Ot();let m=x(""),i=x(!1);const v=()=>{var u;console.log("动画完成");let r=(u=A.value.resultInfo)==null?void 0:u.profitAndLoss;w.value=r!==0,r===0&&T()},p=r=>{let u=r.foldInfo,a=r.playerInvestInfo,t=Object.entries(a).filter(n=>n[1].lambNum>0)[0]||null;r.playerInvestFold=t;for(let n in u){let c=u[n];c.showLamb=c.lambNum>=10?10:c.lambNum,t&&t[0]===n&&(c.playerInvestLambCount=t[1].lambNum)}r.foldInfoByFormat=[];for(let n=1;n<=8;n++)r.foldInfoByFormat.push(u[`fold${n}`]);return r},A=x({}),h=r=>new Promise(async(u,a)=>{try{const{data:t}=await ne({id:r});A.value=p(t),console.log(A.value),u(t)}catch(t){a(t)}}),y=r=>new Promise(async(u,a)=>{var t;try{const{data:n}=await ne({id:r});!n.resultInfo||((t=n.resultInfo)==null?void 0:t.foldNum)===0?setTimeout(()=>{u(y(A.value.id))},1e3):(u(n),i.value=!0,A.value.resultInfo=n.resultInfo,m.value=`3.5s ease 0s 1 normal forwards running move${n.resultInfo.foldNum}`)}catch(n){a(n)}}),w=x(!1),N=B(()=>{var r,u,a;return(((r=A.value.resultInfo)==null?void 0:r.profitAndLoss)||0)>0?"success":(((u=A.value.resultInfo)==null?void 0:u.profitAndLoss)||0)<0?"fail":(((a=A.value.resultInfo)==null?void 0:a.profitAndLoss)===0,"")}),V=()=>{T()},T=async()=>{L("Next Game"),m.value="",i.value=!1,w.value=!1,k.value=0,I.value=10,s.getInfo(),await Q(),f(),U=setInterval(()=>{h()},3e3),ee()},Q=r=>new Promise(async(u,a)=>{try{const{data:t}=await ne({id:r});t.status===1?(A.value=p(t),console.log(A.value),u(t)):setTimeout(()=>{u(Q())},1e3)}catch(t){a(t)}});let S=B(()=>!!(A.value.playerInvestFold||i.value)),k=x(0),I=x(10);const F=r=>{S.value||(k.value=k.value===r?0:r)},G=async()=>{var r;if(k.value===0)return oe("Please select lamb fold");if(!I.value)return oe("Please select stake");if(I.value>(((r=s.user.info)==null?void 0:r.lamb)||0))return oe("Shortage of gold lambs");try{L("Investing..."),await Xe({foldNo:k.value,lambNum:I.value,roundId:A.value.id}),s.getInfo(),await h(),k.value=0,I.value=0,et("Success")}catch{}};let U=null;return qe(()=>{clearInterval(U)}),ze(async()=>{L(),await h(),ee(),f(),U=setInterval(()=>{h()},3e3)}),(r,u)=>{var a,t;return O(),E("section",{class:le(["page-game",{danger:C(i)},{bg2:C(i)}])},[g("section",Mt,[g("section",Nt,[Qt,g("section",Dt,M(((a=C(s).user.info)==null?void 0:a.lamb)||0),1),g("img",{class:"exchange",src:yt,onClick:u[0]||(u[0]=n=>r.$router.push("/exchange"))})]),g("section",Ht,[b(de,{type:"p2",class:"btn",onClick:u[1]||(u[1]=n=>r.$router.push("/wallet"))},{default:W(()=>[he("WALLET")]),_:1})]),g("section",Gt,M(C(l)),1)]),g("section",Yt,[(O(!0),E(pe,null,ge(A.value.foldInfoByFormat,(n,c)=>(O(),E("section",{class:le(["juan-item",{active:n.foldNo===C(k)}]),key:c,onClick:_=>F(n.foldNo)},[g("section",Jt,[g("section",jt,M((n==null?void 0:n.lambNum)||0),1),g("section",null,[(O(!0),E(pe,null,ge(n==null?void 0:n.showLamb,(_,R)=>(O(),E("section",{class:"lambs",key:_},[g("section",Kt,[Wt,n!=null&&n.playerInvestLambCount&&R+1===(n==null?void 0:n.showLamb)?(O(),E("section",$t,[qt,g("section",null,M(n==null?void 0:n.playerInvestLambCount),1)])):te("",!0)])]))),128))])])],10,Lt))),128))]),C(i)?(O(),E("img",{key:0,class:"wolf",style:Ze({animation:C(m)}),src:wt,onAnimationend:v},null,36)):te("",!0),g("section",zt,[b(St,{class:"picker",modelValue:C(I),"onUpdate:modelValue":u[2]||(u[2]=n=>Se(I)?I.value=n:I=n),disabled:C(S)},null,8,["modelValue","disabled"]),b(de,{class:"btn",onClick:G,disabled:C(S)},{default:W(()=>[he("INVEST")]),_:1},8,["disabled"]),g("section",Zt,"Previous round："+M(A.value.previousFoldNo),1)]),C(d).minutes===0&&C(d).seconds<=3&&C(d).seconds>=1?(O(),E("img",{key:1,src:C(tt)(`${C(d).seconds}.png`),class:"danger-index"},null,8,Xt)):te("",!0),b(Rt,{modelValue:w.value,"onUpdate:modelValue":u[3]||(u[3]=n=>w.value=n),type:N.value,onOnClose:V,num:(t=A.value.resultInfo)==null?void 0:t.profitAndLoss},null,8,["modelValue","type","num"])],2)}}}),un=ue(en,[["__scopeId","data-v-ec2bc043"]]);export{un as default};
