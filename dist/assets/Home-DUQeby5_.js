import{B as R}from"./Button-IJMxcbVJ.js";import{d as U,u as Y,a as j,r as d,c as V,o as K,b,e as M,w,f as e,g as m,v as W,h as v,t as E,i as T,j as _,k as h,l as x,n as J,m as $,s as g,p as Q,q as X,x as Z,y as ee,P as se,z as F,A as P,_ as B,B as oe,C as te,F as ae,D as le,E as ie}from"./index-DBFXL0r3.js";import{_ as ne}from"./back-CpyWDUeq.js";import{_ as re}from"./close-DVpJPdOZ.js";import{s as q}from"./toast-C5qvnhx0.js";const ce="/assets/game-Dk6ghKIF.png",ue=i=>(F("data-v-25049e6c"),i=i(),P(),i),de={class:"box-header"},pe={class:"title"},me={key:0,class:"box-content"},ve={class:"input-wrapper"},ge={class:"input-wrapper",style:{"margin-bottom":"0"}},fe=ue(()=>e("section",{class:"forget-wrapper"},"Â ",-1)),_e={key:1,class:"box-content"},we={class:"input-wrapper"},he={class:"input-wrapper"},Ce={class:"input-wrapper"},ye={class:"input-wrapper"},Re={class:"close-icon"},be=U({__name:"LoginOrReg",setup(i,{expose:I}){const C=Y(),f=j();let l=d(!1),n=d("login"),a=V(()=>n.value==="login"),c=60,p=d(!1),y=d(c),k=d(),L=V(()=>p.value?`${y.value}s`:"Send");const r=d({email:"",password:""}),o=d({email:"",password:"",invitedCode:"solamb0",captchaCode:""}),O=(u="login")=>{l.value=!0,n.value=u},S=u=>{n.value=u,r.value={email:"",password:""},o.value={email:"",password:"",invitedCode:o.value.invitedCode,captchaCode:""}},N=async()=>{if(!r.value.email)return g("Email is Required");if(!r.value.password)return g("Password is Required");await q(),await f.login({email:r.value.email,password:r.value.password}),Q(),C.push("/game")},z=async()=>{try{if(!o.value.email)return g("Email is Required");await X({email:o.value.email}),p.value=!0,k.value=setInterval(()=>{--y.value,y.value===0&&(clearInterval(k.value),y.value=c,p.value=!1)},1e3)}catch{}},A=async()=>{try{if(!o.value.email)return g("Email is Required");if(!o.value.captchaCode)return g("Verification code is Required");if(!o.value.password)return g("Password is Required");if(!o.value.invitedCode)return g("Invited Code is Required");q(),await Z(o.value),ee("Success"),S("login")}catch{}},G=u=>{o.value.invitedCode=u};return K(()=>{clearInterval(k.value)}),I({open:O,autoInputInviteCode:G}),(u,s)=>{const H=se;return b(),M(H,{show:v(l),"onUpdate:show":s[9]||(s[9]=t=>$(l)?l.value=t:l=t),class:"login-or-reg-cmp","close-on-click-overlay":!1},{default:w(()=>[e("section",{class:J(["box",{"reg-box":!v(a)}])},[e("section",de,[m(e("img",{src:ne,class:"back",onClick:s[0]||(s[0]=t=>S("login"))},null,512),[[W,!v(a)]]),e("section",pe,E(v(a)?"Login":"Register"),1)]),v(a)?(b(),T("section",me,[e("section",ve,[m(e("input",{type:"email",class:"form",placeholder:"Your Email","onUpdate:modelValue":s[1]||(s[1]=t=>r.value.email=t)},null,512),[[_,r.value.email]])]),e("section",ge,[m(e("input",{type:"password",placeholder:"Password",class:"form","onUpdate:modelValue":s[2]||(s[2]=t=>r.value.password=t)},null,512),[[_,r.value.password]])]),fe,h(R,{class:"btn",onClick:N},{default:w(()=>[x("Login")]),_:1}),e("section",{class:"reg",onClick:s[3]||(s[3]=t=>S("register"))},"Register")])):(b(),T("section",_e,[e("section",we,[m(e("input",{type:"email",placeholder:"Your Email","onUpdate:modelValue":s[4]||(s[4]=t=>o.value.email=t),class:"form"},null,512),[[_,o.value.email]])]),e("section",he,[m(e("input",{style:{flex:"1"},type:"text",placeholder:"Verification code",class:"form","onUpdate:modelValue":s[5]||(s[5]=t=>o.value.captchaCode=t)},null,512),[[_,o.value.captchaCode]]),h(R,{class:"btn-v",type:"p2",onClick:z,disabled:v(p)},{default:w(()=>[x(E(v(L)),1)]),_:1},8,["disabled"])]),e("section",Ce,[m(e("input",{type:"password",placeholder:"Password","onUpdate:modelValue":s[6]||(s[6]=t=>o.value.password=t),class:"form"},null,512),[[_,o.value.password]])]),e("section",ye,[m(e("input",{type:"text",placeholder:"Invited Code","onUpdate:modelValue":s[7]||(s[7]=t=>o.value.invitedCode=t),disabled:"",class:"form"},null,512),[[_,o.value.invitedCode]])]),h(R,{class:"btn reg-btn",onClick:A},{default:w(()=>[x("REGISTER NOW")]),_:1})]))],2),e("section",Re,[e("img",{src:re,onClick:s[8]||(s[8]=t=>$(l)?l.value=!1:l=!1)})])]),_:1},8,["show"])}}}),xe=B(be,[["__scopeId","data-v-25049e6c"]]),D=i=>(F("data-v-978c70d9"),i=i(),P(),i),Ie={class:"page-home"},ke=D(()=>e("img",{src:ce,class:"title"},null,-1)),Se=D(()=>e("section",{class:"msg"},"Gameplay Introduction",-1)),Te=U({__name:"Home",setup(i){const I=le(),C=oe(),f=d(),l=()=>{var n,a,c;(n=f.value)==null||n.open(),(a=C.config.audio)==null||a.bgI.resetPlay(),(c=C.config.audio)==null||c.bgI.addEventListener("ended",function(){this.resetPlay()})};return te(I,async n=>{var c,p;let a=n.query.invite;a&&(await ie(),(c=f.value)==null||c.open("register"),(p=f.value)==null||p.autoInputInviteCode(a))},{deep:!0,immediate:!0}),(n,a)=>(b(),T(ae,null,[e("section",Ie,[ke,h(R,{class:"btn",onClick:l},{default:w(()=>[x("START")]),_:1}),Se]),h(xe,{ref_key:"loginOrRegRef",ref:f},null,512)],64))}}),Fe=B(Te,[["__scopeId","data-v-978c70d9"]]);export{Fe as default};
