import{d as k,a as P,r as p,i as V,k as c,w as m,h,m as B,u as L,P as O,b as M,f as s,g as x,j as v,t as w,l as N,s as S,ac as T,ad as U,p as F,z as D,A as E,_ as R}from"./index-CpsHjDsr.js";import{N as W}from"./Nav-Dda2YksA.js";import{C as j}from"./Card-y4BRJjAB.js";import{B as z}from"./Button-CBgglE8i.js";import{P as H}from"./PasswordCard-B93B6TMn.js";import{s as q}from"./toast-DWm0jl9M.js";import{b as G}from"./index-DKBiJg9O.js";import"./back-Kr7dO9h3.js";import"./index-D0Yk_raA.js";import"./_commonjsHelpers-Cpj98o6Y.js";const n=r=>(D("data-v-d8e99ed1"),r=r(),E(),r),J={class:"page-withdraw g-box"},K={class:"box"},Q={class:"form-box"},X=n(()=>s("section",{class:"label-box"},"SOL address",-1)),Y={class:"value-box"},Z={class:"input-box"},$={class:"form-box"},ss=n(()=>s("section",{class:"label-box"},"Deposit network",-1)),ts={class:"value-box"},es={class:"input-box"},os=["value"],as={class:"form-box"},ns=n(()=>s("section",{class:"label-box"},"Withdrawl amount",-1)),ls={class:"value-box"},is={class:"input-box"},cs=n(()=>s("section",{class:"unit"},"SOL",-1)),rs={class:"total"},ds=n(()=>s("section",{class:"hr"},null,-1)),us={class:"box"},_s={class:"form-box flex"},ps=n(()=>s("section",{class:"label-box"},"Handling fees",-1)),ms={class:"value-box"},hs={class:"text"},ws={class:"form-box flex"},bs=n(()=>s("section",{class:"label-box"},"Amount received",-1)),fs={class:"value-box p-b"},xs={class:"text"},vs=k({__name:"Index",setup(r){const C=L(),l=P(),e=p({withdrawAddress:"",amount:0,password:""}),u=p({amount:0,handingFee:0,receivedAmount:0,totalAmount:0});let i=p(!1);const A=()=>{var o;if(((o=l.user.info)==null?void 0:o.isInit)===2)return S("Please set the password first");if(!e.value.withdrawAddress)return S("Please input SOL address");+e.value.amount!=0&&(i.value=!0)},I=async()=>{if(e.value.password)try{let{data:o}=await T(e.value);C.push(`/withdraw/result?id=${o}`)}catch{}},b=async()=>{var d;let o=((d=l.user.info)==null?void 0:d.balance)||0,t=e.value.amount||0;if(!t){e.value.amount=0;return}t>=o&&(e.value.amount=o,t=o);try{q();let{data:a}=await U({amount:t});F(),u.value=a}catch{}},g=()=>{var t;let o=((t=l.user.info)==null?void 0:t.balance)||0;e.value.amount=o,b()},y=async()=>{e.value.withdrawAddress=await G()};return(o,t)=>{const d=O;return M(),V("section",J,[c(W,{title:"Withdraw"}),c(j,{class:"card-withdraw"},{default:m(()=>{var a,f;return[s("section",K,[s("section",Q,[X,s("section",Y,[s("section",Z,[x(s("textarea",{"onUpdate:modelValue":t[0]||(t[0]=_=>e.value.withdrawAddress=_),placeholder:"SOL address"},null,512),[[v,e.value.withdrawAddress]]),s("section",{class:"op",onClick:y},"Paste")])])]),s("section",$,[ss,s("section",ts,[s("section",es,[s("input",{type:"text",value:(a=h(l).user.info)==null?void 0:a.network,disabled:""},null,8,os)])])]),s("section",as,[ns,s("section",ls,[s("section",is,[x(s("input",{"onUpdate:modelValue":t[1]||(t[1]=_=>e.value.amount=_),type:"number",placeholder:"Min 0",min:"0",onBlur:b},null,544),[[v,e.value.amount]]),cs,s("section",{class:"op",onClick:g},"Max")])])]),s("section",rs,"Total balanceï¼š"+w((f=h(l).user.info)==null?void 0:f.balance),1)]),ds,s("section",us,[s("section",_s,[ps,s("section",ms,[s("section",hs,w(u.value.handingFee||0)+" SOL",1)])]),s("section",ws,[bs,s("section",fs,[s("section",xs,w(u.value.receivedAmount||0)+" SOL",1)])]),c(z,{type:"p2",class:"btn",onClick:A},{default:m(()=>[N("SUBMIT")]),_:1})])]}),_:1}),c(d,{show:h(i),"onUpdate:show":t[3]||(t[3]=a=>B(i)?i.value=a:i=a),class:"popup"},{default:m(()=>[c(H,{title:"Please enter the <br/> transaction password","btn-text":"CONFIRM",modelValue:e.value.password,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.password=a),onConfirm:I},null,8,["modelValue"])]),_:1},8,["show"])])}}}),Ls=R(vs,[["__scopeId","data-v-d8e99ed1"]]);export{Ls as default};
