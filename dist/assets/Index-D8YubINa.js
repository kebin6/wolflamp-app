import{d as k,a as P,r as m,i as S,k as c,w as h,h as w,m as V,u as B,P as M,b as T,f as s,t as n,g as v,j as x,l as U,s as C,ac as $,ad as F,p as D,z as E,A as R,_ as W}from"./index-Br0lMVMS.js";import{N as j}from"./Nav-ZIE6Q4gZ.js";import{C as z}from"./Card-BQW59I5j.js";import{B as H}from"./Button-BWSBoGnF.js";import{P as L}from"./PasswordCard-Dg5wDj45.js";import{s as O}from"./toast-D8h3nvkb.js";import{a as q}from"./index-IoArt0Wi.js";import"./back-Kr7dO9h3.js";import"./index-D0Yk_raA.js";import"./_commonjsHelpers-Cpj98o6Y.js";const r=d=>(E("data-v-a3a9ed8f"),d=d(),R(),d),G={class:"page-withdraw g-box"},J={class:"box"},K={class:"form-box"},Q={class:"label-box"},X={class:"value-box"},Y={class:"input-box"},Z=["placeholder"],ss={class:"form-box"},es=r(()=>s("section",{class:"label-box"},"Deposit network",-1)),ts={class:"value-box"},os={class:"input-box"},as=["value"],ns={class:"form-box"},is=r(()=>s("section",{class:"label-box"},"Withdrawl amount",-1)),ls={class:"value-box"},cs={class:"input-box"},rs={class:"unit"},ds={class:"total"},us=r(()=>s("section",{class:"hr"},null,-1)),ps={class:"box"},_s={class:"form-box flex"},ms=r(()=>s("section",{class:"label-box"},"Handling fees",-1)),hs={class:"value-box"},ws={class:"text"},fs={class:"form-box flex"},bs=r(()=>s("section",{class:"label-box"},"Amount received",-1)),vs={class:"value-box p-b"},xs={class:"text"},Cs=k({__name:"Index",setup(d){const N=B(),i=P(),o=m({withdrawAddress:"",amount:0,password:""}),p=m({amount:0,handingFee:0,receivedAmount:0,totalAmount:0});let l=m(!1);const A=()=>{var e;if(((e=i.user.info)==null?void 0:e.isInit)===2)return C("Please set the password first");if(!o.value.withdrawAddress)return C("Please input address");+o.value.amount!=0&&(l.value=!0)},I=async()=>{if(o.value.password)try{let{data:e}=await $(o.value);N.push(`/withdraw/result?id=${e}`)}catch{}},f=async()=>{var u;let e=((u=i.user.info)==null?void 0:u.balance)||0,t=o.value.amount||0;if(!t){o.value.amount=0;return}t>=e&&(o.value.amount=e,t=e);try{O();let{data:a}=await F({amount:t});D(),p.value=a}catch{}},g=()=>{var t;let e=((t=i.user.info)==null?void 0:t.balance)||0;o.value.amount=e,f()},y=async()=>{o.value.withdrawAddress=await q()};return(e,t)=>{const u=M;return T(),S("section",G,[c(j,{title:"Withdraw"}),c(z,{class:"card-withdraw"},{default:h(()=>{var a,b;return[s("section",J,[s("section",K,[s("section",Q,n(e.$coinName)+" address",1),s("section",X,[s("section",Y,[v(s("textarea",{"onUpdate:modelValue":t[0]||(t[0]=_=>o.value.withdrawAddress=_),placeholder:`${e.$coinName} address`},null,8,Z),[[x,o.value.withdrawAddress]]),s("section",{class:"op",onClick:y},"Paste")])])]),s("section",ss,[es,s("section",ts,[s("section",os,[s("input",{type:"text",value:(a=w(i).user.info)==null?void 0:a.network,disabled:""},null,8,as)])])]),s("section",ns,[is,s("section",ls,[s("section",cs,[v(s("input",{"onUpdate:modelValue":t[1]||(t[1]=_=>o.value.amount=_),type:"number",placeholder:"Min 0",min:"0",onBlur:f},null,544),[[x,o.value.amount]]),s("section",rs,n(e.$coinName),1),s("section",{class:"op",onClick:g},"Max")])])]),s("section",ds,"Total balanceï¼š"+n((b=w(i).user.info)==null?void 0:b.balance),1)]),us,s("section",ps,[s("section",_s,[ms,s("section",hs,[s("section",ws,n(p.value.handingFee||0)+" "+n(e.$coinName),1)])]),s("section",fs,[bs,s("section",vs,[s("section",xs,n(p.value.receivedAmount||0)+" "+n(e.$coinName),1)])]),c(H,{type:"p2",class:"btn",onClick:A},{default:h(()=>[U("SUBMIT")]),_:1})])]}),_:1}),c(u,{show:w(l),"onUpdate:show":t[3]||(t[3]=a=>V(l)?l.value=a:l=a),class:"popup"},{default:h(()=>[c(L,{title:"Please enter the <br/> transaction password","btn-text":"CONFIRM",modelValue:o.value.password,"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.password=a),onConfirm:I},null,8,["modelValue"])]),_:1},8,["show"])])}}}),Ms=W(Cs,[["__scopeId","data-v-a3a9ed8f"]]);export{Ms as default};
