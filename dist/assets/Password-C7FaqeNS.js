import{d as C,r as i,a as S,a6 as x,i as b,k as n,g as m,v as p,h as l,m as w,u as k,s as u,aG as I,aH as N,p as T,y as U,b as _}from"./index-DBFXL0r3.js";import{N as q}from"./Nav-D6_b5Rmy.js";import{P as f}from"./PasswordCard-C8lc51mL.js";import{s as F}from"./toast-C5qvnhx0.js";import"./back-CpyWDUeq.js";import"./Card-lvlnD16T.js";import"./index-BQNDnvI7.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./Button-IJMxcbVJ.js";const R={class:"page-setting-password g-box"},z=C({__name:"Password",setup(B){var P;let r=i(2),a=i(""),e=i(""),t=i(""),c=S(),V=k(),v=(P=c.user.info)==null?void 0:P.isInit;x(()=>{v===1&&(r.value=1)});const y=async()=>{if(!a.value)return u("password is required");try{await I({oldPassword:a.value}),++r.value}catch{}},g=()=>{if(!e.value)return u("password is required");++r.value},h=async()=>{if(!e.value||!t.value)return u("password is required");if(e.value!==t.value)return u("The passwords are inconsistent twice");let d={oldPassword:v===2?e.value:a.value,newPassword:e.value};try{F(),await N(d),T(),U("Success"),c.getWalletInfo(),V.back()}catch{}};return(d,o)=>(_(),b("section",R,[n(q,{title:"Set password"}),m(n(f,{title:"Please enter your old password",modelValue:l(a),"onUpdate:modelValue":o[0]||(o[0]=s=>w(a)?a.value=s:a=s),onConfirm:y},null,8,["modelValue"]),[[p,l(r)===1]]),m(n(f,{title:"Please enter password",modelValue:l(e),"onUpdate:modelValue":o[1]||(o[1]=s=>w(e)?e.value=s:e=s),onConfirm:g},null,8,["modelValue"]),[[p,l(r)===2]]),m(n(f,{title:"Confirm password",desc:"Please confirm the password again","btn-text":"CONFIRM",modelValue:l(t),"onUpdate:modelValue":o[2]||(o[2]=s=>w(t)?t.value=s:t=s),onConfirm:h},null,8,["modelValue"]),[[p,l(r)===3]])]))}});export{z as default};
