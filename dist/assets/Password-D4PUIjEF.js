import{d as g,r as i,a as h,a5 as x,i as b,k as n,g as m,v as p,h as l,m as w,u as k,s as u,aG as I,aH as N,y as U,b as _}from"./index-Br0lMVMS.js";import{N as q}from"./Nav-ZIE6Q4gZ.js";import{P as f}from"./PasswordCard-Dg5wDj45.js";import"./back-Kr7dO9h3.js";import"./Card-BQW59I5j.js";import"./index-IoArt0Wi.js";import"./index-D0Yk_raA.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./Button-BWSBoGnF.js";const F={class:"page-setting-password g-box"},j=g({__name:"Password",setup(R){var P;let r=i(2),a=i(""),e=i(""),t=i(""),c=h(),V=k(),v=(P=c.user.info)==null?void 0:P.isInit;x(()=>{v===1&&(r.value=1)});const y=async()=>{if(!a.value)return u("password is required");try{await I({oldPassword:a.value}),++r.value}catch{}},C=()=>{if(!e.value)return u("password is required");++r.value},S=async()=>{if(!e.value||!t.value)return u("password is required");if(e.value!==t.value)return u("The passwords are inconsistent twice");let d={oldPassword:v===2?e.value:a.value,newPassword:e.value};try{await N(d),U("Success"),c.getWalletInfo(),V.back()}catch{}};return(d,o)=>(_(),b("section",F,[n(q,{title:"Set password"}),m(n(f,{title:"Please enter your old password",modelValue:l(a),"onUpdate:modelValue":o[0]||(o[0]=s=>w(a)?a.value=s:a=s),onConfirm:y},null,8,["modelValue"]),[[p,l(r)===1]]),m(n(f,{title:"Please enter password",modelValue:l(e),"onUpdate:modelValue":o[1]||(o[1]=s=>w(e)?e.value=s:e=s),onConfirm:C},null,8,["modelValue"]),[[p,l(r)===2]]),m(n(f,{title:"Confirm password",desc:"Please confirm the password again","btn-text":"CONFIRM",modelValue:l(t),"onUpdate:modelValue":o[2]||(o[2]=s=>w(t)?t.value=s:t=s),onConfirm:S},null,8,["modelValue"]),[[p,l(r)===3]])]))}});export{j as default};
