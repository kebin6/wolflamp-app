import{d as Y,r as k,af as M,ag as N,i as d,k as D,f as t,F as p,a6 as _,e as y,w as b,a8 as S,u as B,b as l,n as C,ah as z,t as a,h as f,ai as H,aj as I,ak as T,z as R,A as V,_ as E}from"./index-Br0lMVMS.js";import{L as F}from"./index-CCzXtQ-M.js";import{a as U}from"./index-Dx7jyiAW.js";import{a as L}from"./index-DcFMxQZq.js";import{N as j}from"./Nav-ZIE6Q4gZ.js";import{d as w}from"./dayjs.min-DE2R3_3L.js";import"./back-Kr7dO9h3.js";import"./_commonjsHelpers-Cpj98o6Y.js";const r=h=>(R("data-v-7cc6813e"),h=h(),V(),h),Q={class:"page-record g-box"},W={class:"tabs"},q={class:"tabs-header"},G=["onClick"],J={class:"tabs-content"},K={cellpadding:"0",class:"table",key:"depositTable"},O={onClick:()=>{}},P=r(()=>t("th",null,"Time",-1)),X=r(()=>t("th",null,"Status",-1)),Z=["onClick"],tt={cellpadding:"0",class:"table",key:"withdrawTable"},et={tr:"",onClick:()=>{}},st=r(()=>t("th",null,"Time",-1)),at=r(()=>t("th",null,"Status",-1)),ot=["onClick"],nt={class:"block"},lt=["onClick"],it={class:"flex"},dt=r(()=>t("section",{class:"flex"},"Exchange",-1)),ct={class:"flex"},rt={class:"flex"},ut=r(()=>t("section",null,"LAMB",-1)),ft={class:"flex"},ht=r(()=>t("section",null,"Status",-1)),pt=Y({__name:"Record",setup(h){const c=k(0),A=k(["Deposit","Withdraw","Exchange"]),o=k([{total:0,page:1,pageSize:10,list:[],loading:!1,finished:!1,params:{type:"deposit"}},{total:0,page:1,pageSize:10,list:[],loading:!1,finished:!1,params:{type:"withdraw"}},{total:0,page:1,pageSize:10,list:[],loading:!1,finished:!1,params:{}}]),$=B(),g=M(),x=s=>{c.value=s},m=async()=>{let s=o.value[c.value];try{let n={0:L,1:L,2:U};const{data:i}=await n[c.value]({page:s.page,pageSize:s.pageSize,...s.params});s.list=s.list.concat(i.data||[]),s.total=i.total,s.page++,s.loading=!1,s.list.length>=(i.total||0)&&(s.finished=!0)}catch{s.finished=!0}},v=(s,n)=>{!s||!n||$.push(`/detail?id=${s.id}&type=${n}`)};return N((s,n,i)=>{let e=g.config.keepAliveList;s.path==="/detail"?e=["/record"]:e=[],g.setConfig({...g.config,keepAliveList:e}),setTimeout(()=>{i()})}),(s,n)=>{const i=F;return l(),d("section",Q,[D(j,{title:"Record"}),t("section",W,[t("section",q,[(l(!0),d(p,null,_(A.value,(e,u)=>(l(),d("section",{key:u,class:C(["tabs-header-item",{active:u===c.value}]),onClick:z(_t=>x(u),["self"])},a(e),11,G))),128))]),t("section",J,[c.value===0?(l(),y(i,{key:0,loading:o.value[0].loading,"onUpdate:loading":n[0]||(n[0]=e=>o.value[0].loading=e),finished:o.value[0].finished,"finished-text":"没有更多了",onLoad:m,offset:"30"},{default:b(()=>[t("table",K,[t("thead",null,[t("tr",O,[t("th",null,"Quantity ("+a(s.$coinName)+")",1),P,X])]),t("tbody",null,[(l(!0),d(p,null,_(o.value[0].list,e=>(l(),d("tr",{key:e.id,onClick:u=>v(e,"deposit")},[t("td",null,"+"+a(e.coinAmount),1),t("td",null,a(f(w)(e.createAt*1e3).format("YYYY/MM/DD HH:mm:ss")),1),t("td",{class:C({red:e.status===3})},a(f(H)[e.status]),3)],8,Z))),128))])])]),_:1},8,["loading","finished"])):S("",!0),c.value===1?(l(),y(i,{key:1,loading:o.value[1].loading,"onUpdate:loading":n[1]||(n[1]=e=>o.value[1].loading=e),finished:o.value[1].finished,"finished-text":"没有更多了",onLoad:m,offset:"30"},{default:b(()=>[t("table",tt,[t("thead",null,[t("tr",et,[t("th",null,"Quantity ("+a(s.$coinName)+")",1),st,at])]),t("tbody",null,[(l(!0),d(p,null,_(o.value[1].list,e=>(l(),d("tr",{key:e.id,onClick:u=>v(e,"withdraw")},[t("td",null,"-"+a(e.coinAmount),1),t("td",null,a(f(w)(e.createAt*1e3).format("YYYY/MM/DD HH:mm:ss")),1),t("td",{class:C({red:e.status===3})},a(f(I)[e.status]),3)],8,ot))),128))])])]),_:1},8,["loading","finished"])):S("",!0),c.value===2?(l(),y(i,{key:2,loading:o.value[2].loading,"onUpdate:loading":n[2]||(n[2]=e=>o.value[2].loading=e),finished:o.value[2].finished,"finished-text":"没有更多了",onLoad:m,offset:"30"},{default:b(()=>[t("section",nt,[(l(!0),d(p,null,_(o.value[2].list,e=>(l(),d("section",{class:"block-item",key:e.id,onClick:u=>v(e,"exchange")},[t("section",it,[t("section",null,a(e.type===1?`${s.$coinName}/LAMB`:`LAMB/${s.$coinName}`),1),t("section",null,a(f(w)(e.createAt*1e3).format("YYYY/MM/DD HH:mm:ss")),1)]),dt,t("section",ct,[t("section",null,a(s.$coinName),1),t("section",null,a(e.type===1?"-":"")+" "+a(e.coinAmount),1)]),t("section",rt,[ut,t("section",null,a(e.type!==1?"-":"")+" "+a(e.lambAmount),1)]),t("section",ft,[ht,t("section",null,a(f(T)[e.status]),1)])],8,lt))),128))])]),_:1},8,["loading","finished"])):S("",!0)])])])}}}),wt=E(pt,[["__scopeId","data-v-7cc6813e"]]);export{wt as default};
